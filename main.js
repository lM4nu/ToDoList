(()=>{"use strict";const t={lists:localStorage.getItem("lists")?JSON.parse(localStorage.getItem("lists")):[],TodoListItem:class{constructor(t,e){this.id=t,this.title=e,this.todo=[]}},save:()=>{localStorage.setItem("lists",JSON.stringify(t.lists))}},e=t,o=(()=>{let t,s;const d=()=>{console.log("falta ingresar datos")},l=t=>{document.querySelector(".lists").insertAdjacentHTML("beforeend",`\n            <div class="list-btn-div">\n                <button class="panel-btn" id="${t.id}">${t.title}</button>\n                <button class="delete-list">X</button> \n            </div>\n        `)},n=()=>{document.querySelector("table").innerHTML='\n        <tr>\n            <th class="todo-h">Todo</th>\n            <th class="desc-h">Description</th>\n            <th class="completed-h">Completed</th>\n        </tr\n        '},i=t=>{const o=document.querySelector("table");n(),e.lists[t].toString()&&e.lists[t].todo.forEach((t=>{o.insertAdjacentHTML("beforeend",`\n            <tr id="${t[0]}"> \n                <td>${t[1]}</td>\n                <td>${t[2]}</td>\n                <td>\n                    <input type="checkbox" ${t[3]?"checked":""}>\n                    <button class="delete-todo">x</button>\n                    <button class="edit-todo">edit</button>\n                </td>\n            </tr>\n            `)}))};e.lists.length>=1&&(e.lists.forEach((t=>{l(t)})),t=localStorage.getItem("currentList")?JSON.parse(localStorage.getItem("currentList")):0,i(t));const c=()=>{const t=document.querySelector(".modal-window"),e=document.querySelector(".overlay");t.classList.add("hidden"),e.classList.add("hidden")},r=()=>{const t=document.querySelector(".modal-window"),e=document.querySelector(".overlay");t.classList.remove("hidden"),e.classList.remove("hidden")},a=(o,s,d)=>{e.lists[t].todo[o][1]=s,e.lists[t].todo[o][2]=d,c(),i(t),e.save()},u=document.querySelector(".submit-todo"),v=document.querySelector("#edit-todo-input"),m=document.querySelector("#edit-desc-input");return u.addEventListener("click",(()=>{a(s,v.value,m.value),v.value="",m.value=""})),{toggleAddInput:t=>{t.classList.toggle("hidden")},addList:o=>{o.value?(t=e.lists.length,e.lists.push(new e.TodoListItem(t,o.value)),l(e.lists[t]),e.save(),console.log("piola"),o.value=""):d()},addTodo:(o,s)=>{var l;o.value&&s.value?(e.lists[t].todo.push([(l=t,e.lists[l].todo.length),o.value,s.value,!1]),i(t),o.value="",s.value="",e.save()):d()},drawTodos:i,currentListId:t,currentTodoEdit:s,buttonHandler:o=>{const d=o.target;if("BUTTON"!=d.tagName&&"INPUT"!=d.tagName)return;const l=d.closest("tr").id;if(d.classList.contains("delete-todo"))return n=t,c=l,e.lists[n].todo.splice(c,1),e.lists[n].todo.forEach(((t,e)=>t[0]=e)),i(t),void e.save();var n,c;if(d.classList.contains("edit-todo")){s=l;const t=d.closest("tr").querySelectorAll("td");return document.querySelector("#edit-todo-input").value=t[0].innerText,document.querySelector("#edit-desc-input").value=t[1].innerText,void r()}e.lists[t].todo[l][3]=!e.lists[t].todo[l][3],e.save()},listsHandler:s=>{const d=s.target;if("BUTTON"!=d.tagName)return;if(d.classList.contains("panel-btn"))return t=parseInt(d.id),void o.drawTodos(t);const c=d.parentNode.children[0].id;var r;c==t&&n(),r=c,e.lists.splice(r,1),e.lists.forEach(((t,e)=>t.id=e)),e.lists[t]||t--,e.lists[t]&&i(t),document.querySelector(".lists").innerHTML="",e.lists.forEach((t=>{l(t)})),e.save()},showModal:r,hideModal:c,editTodo:a}})(),s=o,d=document.querySelector(".lists-add-btn"),l=document.querySelector("#add-lists"),n=document.querySelector("#add-list-btn"),i=document.querySelector("#add-list-text-input"),c=document.querySelector(".lists"),r=document.querySelector("table"),a=document.querySelector("#todo-btn"),u=document.querySelector("#todo-input"),v=document.querySelector("#desc-input"),m=document.querySelector(".close-modal"),h=document.querySelector(".overlay");d.addEventListener("click",(()=>{s.toggleAddInput(l)})),n.addEventListener("click",(()=>{s.addList(i)})),a.addEventListener("click",(()=>{s.addTodo(u,v)})),c.addEventListener("click",(t=>{s.listsHandler(t)})),r.addEventListener("click",(t=>{s.buttonHandler(t)})),h.addEventListener("click",(()=>{s.hideModal()})),m.addEventListener("click",(()=>{s.hideModal()}))})();